sudo: required
services:
- docker
language: go
script:
- set -e
- export BUILD_NUMBER=$TRAVIS_BUILD_NUMBER
before_install:
- docker login -u $DOCKER_REG_USERNAME -p $DOCKER_REG_PASSWORD $DOCKER_REGISTRY
- chmod 755 ./docker-push.sh
- go get github.com/mitchellh/gox
- gox -build-toolchain
- go get github.com/tcnksm/ghr
- go get github.com/axw/gocov/gocov
- go get github.com/mattn/goveralls
- go get code.google.com/p/go.tools/cmd/cover
after_success:
- make builddocker
- "./docker-push.sh"
- gox -output "dist/{{.OS}}_{{.Arch}}_{{.Dir}}"
- ghr --username $GITHUB_USER --token $GITHUB_TOKEN --replace --prerelease --debug
  pre-release dist/
env:
  global:
  - secure: gW7bin86KWeVFeGuDV9CAn1+InCIjwM95ufaUeLChyBsna+QLSjXkSqkiNJviLINSQn7qsIRLafRizrGGFeroQKmkJnGwLPmXN+PV1GXpl5q4SZTnL/Mx7m0CrYcIxxN3jPdKOFETduFXZXC19pyw3vsCZqN3pcVaHUOnVgIZi73FmRy0QURqhu2TPQl4yYU3yWqV7f0+tC9Vv/OFgTG/dlHxFM328pyVOFRj2eOq0xuZ34qzL/2cl1LzzeVIifkH4khTn+wOElITQdTXWkDsDyME/2fnKBMqvJm4MazQni0CZaB47B8uQ5rXSAnZLvWfVIzM1vkIeOatWif7diSNibZu3gr4bjQAsYlQp6mrjpubG11DGT6l38fd5FmQwMcQpOOxXFnIp76K8351ZY8O4uDHhloNaQHNRaTfe4srQgZBSGP4ygNHCpgkXNbKz4TGn84MkXoR16Tbw+jkq72VMryHNjtqsNPaFCe1dhUdVj6UddcPedsCtLFLXivyA8jOcSQgR3oKLaiVy7H9FXTYPFqZSGoJoxpIluFCwvI0Jbqn4IYSYz2eRiCbVZuhXRayq6QVJ+kHubsm1YIw6DgZ1SsEO2Nv3Pi3qJ7OARkkO/cefK/UMIDP/j+De9JXW8RjWS+UkJXFecJ+7U+Dea2W70St7eLtnnp76VtJbbKedM=
  - secure: hZvE9CAAT6pppy79LHiwCIE0SrkIK9my4AgcX0EaFbsDILHJPWik1ym0qu8rQ9x5NvIs1QMR205o8EbJdHfwqvrqzITfOFMktRseLfjdicgworr2q8wzO5LgvZk68iDx20GHU6ta/0Ms3Yg6gEMR5pnkAM7RmsROMRzDPEophGRGg9Qa6e99rTq40XC7NanwDMKdM9c9qu/mGtWoynJ2MczlfZJTTRYrzkX7CKr1P2U9WCYoSJB6Aj0zZhU8v1doUlEabf18tgNLKht5L4IP0dgVL+1Qn0nxentIPH1+J3XxLXEayRqJLBxYetBwXEp3f+tiw5YonYQTUioFqOSpdSHu8pC6IMl9uCPsyeqE/RYbGXYd0qQL18T//zUO7cEYUOHO3opV+Rsiq1fYDzHWMSSjiHDi1teTyi5jLXjZbJN9it3lM2wPo56xloRGlnrE22VHnV8ZFeBHvGdm7KdCdom3Y2MT1zOxhZ4MHDeqSQF5YMKcNZgw8exAxggh8NYP3Io8knpPfEVCsl7Zwh743yDJ1+S29Ij+fa4lIqewIQ/YlGgX5yZFyi7C1x8IpHiW5Fjw94PJwIkdYlUuRCUnJasb0qxWonUPTv8hD/2Ul3C7xMfuBTv0zipo2LBFzKrbxNGwwswW6gw4+g9luoSmtJzrZASKJ+u5wFyxI/pKj6U=
  - secure: KqtPPnM5rWycF/HiZnbCTN329nsisZvzKis3uDbQrBd6j1EaFLJRyaGLCQlO+QrITFpYqsQPzorczQHVtU3EnhWLagKPraVvR7ZNyOSuNLejxVXJhZpRF7VsLnUW+RH6tYxwCtQJGJau8npzDfVuSodz0/J9Eyc42QO/tn0rqmoT+uAb1ZtMcBXgn26HkxcEPJdKFpHzqUP5MxT+RpmcF8W5nbISyy3CltztYeXkGIWWYEwm6Pf5mlxzkIHqNWkMA/n7/ILS8Sl0uLdtrAsj3UAsOAV2SEXifoRENmVsgFBkhz/jFA9ebJoIY6Yc/l/uSy3AIp9eiDTDmlYEpgBJ6k2EykZtMTQRUuD+DOkYTVfegrvQS7j9N8nQtqLiLZB1SCU4hYi9+WNiOQuMLjy13b7tNCSDo+JwtqmwNDZVYQ3f+Fatd3VNEnIuQ92BioRpbDjeB6/LKtpm+pE75FAunIg4simuDTSsoDIx6V16yjKAKE5ShMEiwLjhaskEUPRZp9CGbgyYZqR7jBVj8YPKY2d9GXz61EEVT4ZCOtya5CTSvunK85q2XgJxuuSaYdTERrmdNHYn0Yt5bsDf507BGHXlYoENV5f+Li6PVFFyZlyeRQK1D/J9kzDusbXaddAlLw8IDOG3j4Chw/TkdujpelTSQyMbVJsnBwxyFNLS/GQ=
  - secure: HHTFxAp5d1eFrLdpFJVz2BhCkKILT+a1CGmRenB9moWtFpRYpX9gAWUe4WN3Gs1EFJdiTL8FgU+4capKdso6jeWRQY5iWk+F5yQAj561XVCPoqmoDmBCyLfA35LJJhqGKxUokF6XdTTGt2lBAtlohJ8Lci7gVh9PPh5yCXEbA2XOKLMNbmVDEbJSxuBq5xfbEqARxT/UFKcqueCXg9sQIu584zITGN+uxlQjMi1/toC80hA/6Huz8UqkRcaiv4tB6T/2NW/w+/Qseuv7t/PPZ5+sUClIGCFTxqA5kp/TL/JjqRyp6JDZ9LdylcJw9FLLmKQTWEQmTmOiQwksQbtV4SSbYZea9Uq6SYyri0oSNHHCyMiLidz7LsDw00dHisPgwZjAocq6uiCkeQCOzZwu3OAktDVy0+ohu4XcAELmCzGpT2x/atm1oZM643EBThqD/nJD338kHYXBRFBKD9ttNpfBhzI8kyrruKCEjngexDvAuXOt8YKHziFIg6p0avVngNgExdyrmJNkZGCDaFwDXV2wbfwUGDNZ+Z9Kiyld0xsY/iG9n83eQs9XPIAxD3SA7+OannkIWUhS9RlUe5p5CANzHQwztJGiIxxADuqS3NYHpXkH/U98/oenRx6GrljYTJjBet8E8cPPrBkGKtE4uOYC/0j9igObiJAbWFy3cV4=
  - secure: DoER9TxCf2qFvB4XPUidSfFhIZM4o1btXV1RovoQWj0ewo1cQ83kWXqVyPm+nHvUYblOfyXQQiG6j1s4uadme+oI383RwqengQmjra1xWt7Wd85N8NCTY3Fec906tMfXBeYdd0p8FzVwnPAiLXvlljKtDsWlolLHfnUPDT6yObBHPA+5TQJQLbPCYAD2T3ret2Qm7wykWX1k+tXCrGW1erbmjQtl8kSwr33I8OAgeDM7KM/+v8FUUxdbF//AmglU3lNmJHg+2yDq2idvLLhWvcMoeGkoBFEx+IUzVfKAwA3GqDmWQVmpjDj0deZbv/30kRYC9wQqMgkUEACP4aqPqPModeA8eAzd1MNfJv3xjImRoRyAWRhYjzSirY62X2PxWd6vEBwbRSx5VWsFwvleMJ4cRLt7tvQh2IaOu9rvzeuoubpp2FuijqATX9h07Gy9WBeq2Jy5ig+o0f6U17P4TAufFJBQpGMATiT7xAeVj31SBmmydofE+gL+UarIOawlUAjVS1C+78mSCiJEqOwfle0ladUMc0PHzfDdO43OmyitJ5VNt4+K/6jrG56EE0RYSrbp3ql7efSv5OrS2e0RyiFBBBbRqGj2JlAPA//hWOn6V3JXPYzmKG/b5WVnGqonkof8TZ5sA1Qv4+nZJy872sbD7nlj6vKeSfTMoUYK7Mg=
