sudo: required
services:
- docker
language: go
script:
- set -e
- export BUILD_NUMBER=$TRAVIS_BUILD_NUMBER
before_install:
- docker login -u $DOCKER_REG_USERNAME -p $DOCKER_REG_PASSWORD $DOCKER_REGISTRY
- chmod 755 ./docker-push.sh
- go get github.com/mitchellh/gox
- gox -build-toolchain
- go get github.com/tcnksm/ghr
- go get github.com/axw/gocov/gocov
- go get github.com/mattn/goveralls
- go get code.google.com/p/go.tools/cmd/cover
after_success:
- make builddocker
- "./docker-push.sh"
- gox -output "dist/{{.OS}}_{{.Arch}}_{{.Dir}}"
- ghr --username $GITHUB_USER --token $GITHUB_TOKEN --replace --prerelease --debug
  pre-release dist/
env:
  global:
  - secure: CQIbtipt3nslCs63NJIhk++daIPiGYaNVM6XsaOjco9yj+DdYqCPYR/UYYVtkXjdSiAasolZ9pyY89R6dzNU0pOnT+m9Hh5aVqUuypSBv/O34lfTb4KTR1k5WrIu3lTOVQ8MwdXpbsv93G8uCiDY/MPhtv3hdIzx5+oN8oykaXnTVhzW9g3QYnWBh4PW1mt1IfCvPg0IXU/pICsMMa5TZiT5k9k74dakg1rnZKfKRWg9d7eaBsIiz3hkuIrPIrNsfMnZUFTi9BCNHrxdOEJZC93sMrPK7eZxU/VOJNiwH6EWs65c77CNN5XxwTXTpqReptd67JK34LB+k07vwI9J82f9OxEawefQDdGePUNeoFHpYKAb/jAvrmHgx4CpOZT1DtKR3i0BqL2jWhTp6jZojcW7gX9nLZJ2EMX5o39M14aqVErqd9MftneYrZzFdKZiqOenk0okyncfc9yo7zODSlhe+8XAhGA9pnJE/LONgu0jdzH6rwQJthFwT5t5eU9n4T2LlK7v7ZcukqNi5L9aoV74gg3zt8DLE6n62m2ZUwU8RmsNKOyb6lIM4872ju86VgdwrI8KZwPvDgU4hoqVCMp4L5OriWa1DXuv1x2wVrf0iz2qy/qWiihnW/Yxr4a4SPtMLWWyOIG1kdiZ0ti5VB+hCSzKGHXh3bNSpe91zK8=
  - secure: k2PJpGdajSEqA8fgWSlcogeHhV49HWn56ysE4m3kfzuNdeEo6p063kws4pvdbR2JdHq8+WztnyAJeuxPqHNL70kV3mlNj4xYd9L0TXNzxH9eybda49cmMsLvnhaTmGVgwvgcpUdlmW5Fw4xBp6XjdNCQnLSHZYvErKTo6idk8Y9RIxloGW4ALEQQxlLxwPGbhOaFJRCIa6zvMnz7Upd/9I5LKwBWrDCUa9Pm8YnHxqxczNt6+EViEDkw7QxKkBrRhmtZQ9QwN9qKJjTzURvubiFzFTPMavBAppeu0Vjobf7+pJJuP9bnJhjHwp7RJUV7X1rHVbSVOo5EboQnsgSUSkUyFdNe7WHktyz/8k5qYviPnpqJvi8MdLo/DutYZvXPZboCpSN61eKCEAAufq5lvpdi9w87sGxjB9LHMgbkWHxcSrAI5lRKkyz/v9cfr2MAjQmquxtowIuyZC2ZBZSe/fEsebuvFhkG3AzFx5wBII/Xd+85GJopNHm2hVYBm+PHXJVnyrG/l8GFIgQDsev8SLI+gY4fPYabd9llZO13amjEZVirDoVdzINA0ag/Ok4uglZRqRcbMgbK9LnTSmLvJ3vfCFHBW9M1NYVYR1o4CUM1lmAWkRLJSpgAPFZ61eh94BG4y0bl+ddwXGFuAQZpS9KlCqCLTUikMJGz9Biz8/Y=
  - secure: DEWB6aSiq/nwlWUv7oppHYScPD8Xy6mtro071lQbBOlkKtNWJPP+apYx1ea2hMrf4umbo1e5M4VJJg9J+P4MULLyNv55M9qrDb400uRoWAQQcrp4avcdDKnunB76nc7WEY/stFCmQSn6SIJ4VyvR3/bnJ8IrAKgGo9CTtkRpy4fbMbBBnSnPkRoFj4ihYwUzb0sJIAyz0a/81cN3irJ9NnUJIQl+jzA5LwNZjx572cJ9Bv10DspukhZpR9mUp1kGz+QqMe9ja6B+gN8zc7FWgJY/JG86Ed0S9WjvMC+YEaTtaqr3sTEDW4XdqF7CUc4u4rz1iHDR+8OPwfJ1LjpX34U8zQDAeKp7iLPSwq6CPHjKoMo7H2wMesn3UxSh3FkLcpxnaHId+lAoKvHH8cT8Dkwjm+fg3+YU2VdusOBvHu3EgOJxA4LSnMpMl0PLFBipk56KNDRpyE2+9jsJUhfn1NzZ9rRH0BzmL7rQBopeKbEeShWVeyYBplr4zTH1RvgKgxH/pYcyxYbtWPCRHtK6uE3S9ZyLXDdRJ5WXXNwN52kjUbpjlvR1BEiDQcWhrYDVZ6Kb2JZQSPC2ALCkNF+KhatF3jC50qRfGE16o9/+z8C3xDOhw76HiSrYYfrMcNr6a1q5/pF/UfijaxdESGiUEIvR1DHemXlk6JTRrm5I+ok=
  - secure: lgAUGdCyJpcK8IGhsB4AgNche5WCOlu1LuP1vGPbuH6mJ6Uh8Sacgk8alNeBATFbjnKRqHWB6n8kr0qv51KAG1NMJIkbmt14mDw57JjyuHpDtWI99fuJzinSGKnbmkEe0BqL/S18rf02X7+9TKJuZkwS4K8GA279d0ke5niu4yw/hru3BxEwg3nWovw+lrjX8WevYiVz9HgMEOHTbBLyW5/ln3UxrBeGcErRuQQeb+tQHJzSrGCnfIFkta4lJkAAQ+D0tsDHdF50ZDtbTdWX0czfEL/nPQC0T5zcTIEst5uUqWr75uHPpSw9y1QW/uzNHktO1mUzftAsUZQ2n1iJnfybAOwBj2iI+oDo4HeDmYL6dnLdGZseCKT18VrEoyhJ5oqCJ7rtowCeT8wHLIkXjckfYB5JJuvrJcQCu0dDUSxOavIwDjZF8BgW8NpeqlUvfTj/PdTxvQRaL6GZE+PmPaGq7iC+lQwszIeApVEJ9fFDLb8Lf5XQNFOTGQFmxwKb3XRyXBEvzUPtkMMV8z8wb9rSAMXFA8RPQsnTLgBZlG1BE7jGgTRi/cPoVgrxnx0dR+cuhVJ9UWgF8FImG+Gjp/kkW2GTLFlOM3LQUt89uWy7NjXX5X6I/lyrVfbx4hsqPHg0AIC/A+ad/j7fzr/nv9tuFwFxAUKUyyENpYIPEtY=
  - secure: iEZWF6taNDlJ1R74lxYZJuA65Q5rP+SVAmYwROskU+xrJIXHp/R26OzjLTGET0zW0DLRJaK/y7GNyEpfhk5T4Mr2h85IafsWoQLMGyd3NSrrvrdb7Zc+l+6QmqZHBHgocghmlVlu7ONkbtW60AGdGk5VnapzCo2LSMuj5lTcGhizGWjd0LuuXZUUbgypbice4Df1EpPWkc4unrsBBOrPpSIzNkjWyEvc3E/bXi2mN/o7X4EjP6KXsSMVPvj6U/HHxWuEK5FJijA+1FIBoGl7iCeMry+6oejxM1o8FSD1AQlQJsS0uV5kNugtg2YjhsRBvIKARwyvOKDNy6Q6YKsJ8Sc2bGBuUQnCejxMsSBysEOoTlOAUWOsH0be+X5KoCaD/JXwIbRmw9ydTZThC7uiSSGUit3HkFg/j8xu6/VagrajJ7Cznw8Xl7nXtMKnaw2WH7u83gr7b+IJZ7aMgg7R8R33l9mLdIhbn/3ZIiRDhPhsEOy0ddx++vX0kI7U98QgV7A3Eo4Lwz4ljnx8R43M/WPhK4F1GfoxTWE0fjigXTdeqW5zssLbOoMHwKfcy4BZlWmj12xXoy6FldXKyiqKLg3DqeWE8/7g9MKdSaNiZZurWbs4ViQ+nYMM6RlM3C5T/C7DzhcNZol1qHoWfiwM3PXQBT8rkPqer+0hnPzUbog=
